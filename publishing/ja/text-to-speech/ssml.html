<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>SSML</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Overview of using the EPUB 3 SSML attributes to improve text-to-speech rendering.">
		<script>
			var page_info = {
				'category': 'Text-to-Speech',
				'appliesTo': ['EPUB3']
			};
		</script>
		<script src="/js/init.js"></script>
	</head>

	<body>
		<main>
			<div class="warning" aria-labelledby="note-hd">
				<p id="note-hd" class="label">注記</p>
				<p>There is no support for the EPUB SSML attributes in reading systems at this time.</p>
			</div>
			
			<section id="summary">
				<h3>要約</h3>

				<p>The EPUB SSML attributes offer the promise of improved voicing of text.</p>
			</section>

			<section id="ex">
				<h3>例</h3>

				<figure id="ex-01">
					<figcaption>
						<p class="label">Example 1 — Declaring the SSML namespace and phonetic alphabet on the 							document root</p>
					</figcaption>

					<pre id="ex-01-src" class="prettyprint linenums"><code>&lt;html …
   xmlns:ssml="http://www.w3.org/2001/10/synthesis"
   ssml:alphabet="x-sampa"&gt;
   …
&lt;/html&gt;</code></pre>
				</figure>

				<figure id="ex-02">
					<figcaption>
						<p class="label">例2 — 単語レベルでの発音記号と発音を表記</p>
						<p>単一の文字は、文脈に応じて頭文字、方向、またはその他の短縮形になる可能性があるため、辞書で定義するのは適切ではありません。</p>
					</figcaption>

					<pre id="ex-02-src" class="prettyprint linenums"><code>&lt;p&gt;
   … farther &lt;span 
   ssml:alphabet="ipa" ssml:ph="nɔrθ"&gt;N.&lt;/span&gt;
   another elevation begins …
&lt;/p&gt;</code></pre>
				</figure>

				<figure id="ex-03">
					<figcaption>
						<p class="label">例3 — 同綴異音語の異なる発音の定義</p>
					</figcaption>

					<pre id="ex-03-src" class="prettyprint linenums"><code>&lt;p&gt;
   The guitarist was playing a
   &lt;span ssml:ph="beIs"&gt;bass&lt;/span&gt; that was shaped
   like a &lt;span ssml:ph="b&amp;s"&gt;bass&lt;/span&gt;.
&lt;/p&gt;</code></pre>
				</figure>

				<figure id="ex-04">
					<figcaption>
						<p class="label">例4 — デフォルトのアルファベットがすでに設定されている場合に発音を定義する</p>
					</figcaption>

					<pre id="ex-04-src" class="prettyprint linenums"><code>&lt;p&gt;
   The guitarist was playing a bass that was shaped
   like a &lt;span ssml:ph="b&amp;s"&gt;bass&lt;/span&gt;.
&lt;/p&gt;</code></pre>
					<p>A <a href="pls.html">PLS lexicon</a> would including the following entry to define the default 						pronunciation:</p>
					<pre class="prettyprint linenums"><code>&lt;lexeme&gt;
   &lt;grapheme&gt;bass&lt;/grapheme&gt;
   &lt;phoneme&gt;beIs&lt;/phoneme&gt;
&lt;/lexeme&gt;</code></pre>
				</figure>

				<figure id="ex-05">
					<figcaption>
						<p class="label">例5 — 文脈に応じて異なる発音を定義する</p>
					</figcaption>

					<pre id="ex-05-src" class="prettyprint linenums"><code>&lt;p&gt;
   You'll be an
   &lt;span ssml:ph="Ekstr@ lArdZ"&gt;XL&lt;/span&gt;
   by the end of Super Bowl 
   &lt;span ssml:ph="'fOrti"&gt;XL&lt;/span&gt;
   at the rate you're eating.
&lt;/p&gt;</code></pre>
				</figure>
			</section>

			<section id="desc">
				<h3>解説</h3>
				
				<p>SSML（<a href="http://www.w3.org/TR/speech-synthesis11/">音声合成マークアップ言語</a>）を使うと、コンテンツ製作者は、出版物のデフォルトの合成音声レンダリングを、マークアップレベルでさらに正確にすることができます。SSMLを十分に使用することで、TTSの読み上げで作品を聞く人は、レンダリングエンジンの推測に基づくものではなく、コンテンツ製作者が意図したとおりの文章を聞くことができます。</p>

				<p>SSMLの<code>phoneme</code>要素は、マークアップレベルで発音を定義するためのペアの属性としてEPUB 3に実装されています。</p>

				<ul>
					<li>
<code>ssml:alphabet</code>属性で、デフォルトの発音記号を設定します。</li>
					<li>
<code>ssml:ph</code>属性で、テキストコンテンツを持つ要素、または音声発音を関連付けることができる要素（たとえば、添付された属性から発音が派生する空の要素）の発音を定義します。</li>
				</ul>

				<p>(Support for the full SSML specification is not available in EPUB 3.)</p>

				<p><a href="pls.html">PLS辞書</a>とは異なり、SSMLはマークアップレベルで発音を細かく制御できます。SSMLを使用すると、同綴異音語の発音をデフォルトから変更したり、複雑な単語や数字の発音を正しく指定したりできます。</p>

				<p>To use the SSML attributes, you must first declare the SSML namespace. The declaration is typically 					made once per document on the root <code>html</code> element. (See <a href="#ex01">Example 					1</a>.)</p>

				<p>A default alphabet is also typically defined once on the root <code>html</code> element, as it is 					rare to need to switch phonetic alphabets within any single document. Adding the 						<code>ssml:alphabet</code> attribute to the root ensures that all instance of the 						<code>ssml:ph</code> attribute have an in-scope alphabet defined. It is an error to define a 					pronunciation in an <code>ssml:ph</code> attribute without an in-scope alphabet, and will result in 					rendering errors. (See <a href="#ex01">Example 1</a>.)</p>

				<p><code>ssml:ph</code>属性が検出されると、その値が要素のコンテンツの代わりにテキスト読み上げ（TTS）エンジンに渡され、最下位レベルのオーバーライドが提供されます。SSML属性の発音はPLS辞書エントリーよりも優先されるため、同綴異音語や規則の例外が適切に処理されます。</p>

				<p><code>ssml:ph</code>属性の値は、その属性が付けられた要素の子孫要素も含めてすべてのコンテンツを置き換えることに注意してください。段落内の一つの単語の発音を定義するために、この属性を<code>p</code>タグに付加しないでください。段落全体の代わりにその一つの単語だけが読み上げられてしまいます。発音の指定が必要な単語にマークアップが存在しない場合は、<code>span</code>要素の使用をお勧めします。</p>

				<p>The SSML attributes are not valid on SVG or MathML content, but are valid on any XHTML content that 					can be embedded in those grammars.</p>
			</section>

			<section id="faq">
				<h3>よくある質問</h3>

				<dl>
					<dt id="faq-001">Should I use IPA or X-SAMPA or something else to write my pronunciations?</dt>
					<dd>
						<p>Although IPA is arguably the most widely recognized phonetic alphabet, that does not mean 							that it has full support even in existing synthetic speech engines. Some engines support 							only their own alphabets, for example. IPA is also less developer-friendly than X-SAMPA 							because it uses Unicode characters that require modifying most keyboard layouts to input, 							whereas X-SAMPA is ASCII-based. Internal workflows should be a determining factor at this 							time. The ultimate answer will depend on what engines are employed in reading systems.</p>
						
						<p>Note that it is possible to translate one alphabet representation to the other, so work in 							either alphabet shouldn't ever be <q>lost</q> if there does turn out to be a clear winner 							and loser.</p>
					</dd>
					
					<dt id="faq-002">Should I use PLS lexicons or SSML?</dt>
					<dd>
						<p>EPUB 3にこれらの技術が盛り込まれたのは、どちらかを選択しなければならないということではなく、これらの技術が互いに補完し合うようにするためです。PLS辞書を使用すると、単語を一度定義すれば、その単語が文章中に現れるたびにTTSエンジンがその単語を置き換えます。一方、<a href="ssml.html">SSML</a>は、辞書では不可能なきめ細かい制御ができますが、その代償として、置き換える必要がある用語の各インスタンスにタグを付ける必要があります。</p>
						
						<p>SSMLのみを使用することは可能ですが、製作時間の面でコストがかかり、処理する必要がある一意の用語の数と出現頻度によっては、、コンテンツ ファイルのサイズが過度に大きくなる可能性があります。</p>
					</dd>
				</dl>
			</section>

			<section id="refs">
				<h3>関連リンク</h3>
				<ul>
					<li>EPUB 3 TTS Enhancements — <a href="https://www.w3.org/TR/epub-tts/#ssml">SSML 							attributes</a>
</li>
					<li> 						<a href="http://www.w3.org/TR/speech-synthesis11/">Speech Synthesis Markup Language (SSML) 							Version 1.1</a> 					</li>
					<li>
<a href="http://www.phon.ucl.ac.uk/home/sampa/x-sampa.htm">Computer-coding the IPA: a proposed 							extension of SAMPA</a> (X-SAMPA)</li>
					<li> 						<a href="http://www.langsci.ucl.ac.uk/ipa/ipachart.html">Reproduction of The International 							Phonetic Alphabet (Revised to 2005)</a> 					</li>
				</ul>
			</section>
		</main>
	</body>
</html>
